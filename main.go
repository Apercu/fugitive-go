package main

import (
  "html"
  "os"
  "log"
  "strings"
  "regexp"
  "net/http"
  "gopkg.in/mgo.v2"
  "gopkg.in/mgo.v2/bson"
)

var c * mgo.Collection

type Link struct {
  Id bson.ObjectId `bson:"_id,omitempty"`
  Src string
  Dst string
}

type Body struct {
  Dst string
}

func sendError (w http.ResponseWriter, t int) {
  http.Error(w, http.StatusText(t), t)
}

func kappa (w http.ResponseWriter) {
  w.Write([]byte(`<body><img src="data:image/png;base64,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"></body>`))
}

/**
 * Link retrieve with redirect
 */
func get (w http.ResponseWriter, r * http.Request) {
  if (strings.Index(strings.ToLower(r.UserAgent()), "bot") != -1) {
    kappa(w)
    return
  }

  var id string = strings.TrimLeft(html.EscapeString(r.URL.Path), "/")
  match, _ := regexp.MatchString("^[A-Za-z0-9]*$", id)
  if (!match) {
    kappa(w)
    return
  }

  result := Link{}
  err := c.Find(bson.M{ "src": id }).One(&result)
  if err != nil {
    kappa(w)
    return
  }
  err = c.Remove(bson.M{ "src": id })
  http.Redirect(w, r, result.Dst, 301)
}

/**
 * Link creation
 */
func post (w http.ResponseWriter, r * http.Request) {
  dst := r.FormValue("dst")
  if (strings.Index(dst, "http://") != 0 && strings.Index(dst, "https://") != 0) {
    sendError(w, http.StatusBadRequest)
    return
  }

  var id bson.ObjectId = bson.NewObjectId()
  var hex string = id.Hex()
  hex = hex[len(hex) - 7:]
  err := c.Insert(&Link{ Src: hex, Dst: dst, Id: id })
  if (err != nil) { panic(err) }
  w.Write([]byte(hex))
}

/**
 * Return the port to listen to according to the PORT env variable, or 3000 by default
 */
func port () string {
  var p string = os.Getenv("PORT")
  if (p != "") { return ":" + p }
  return ":3000"
}

/**
 * Connect to mongo and set global collection variable
 */
func main () {
  mongo, err := mgo.Dial(os.Getenv("MONGO"))
  if (err != nil) { panic(err) }

  defer mongo.Close()
  mongo.SetMode(mgo.Monotonic, true)

  c = mongo.DB("fugitive").C("links")

  http.HandleFunc("/", func (w http.ResponseWriter, r * http.Request) {
    w.Header().Set("Access-Control-Allow-Origin", "*")
    w.Header().Set("Access-Control-Allow-Methods", "GET, POST")

    if (r.Method == "GET") { get(w, r) }
    if (r.Method == "POST") { post(w, r) }
  })

  log.Fatal(http.ListenAndServe(port(), nil))
}
